{
	"info": {
		"_postman_id": "b1b82863-3ffe-4ef9-acca-ae9a7870241f",
		"name": "Anybill Vendor Api",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Store",
			"item": [
				{
					"name": "Get stores",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/v1/store?",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"store"
							],
							"query": [
								{
									"key": "skip",
									"value": "0",
									"description": "Elements to skip for pagination.",
									"disabled": true
								},
								{
									"key": "take",
									"value": "100",
									"description": "How much elements to take for pagination.",
									"disabled": true
								}
							]
						},
						"description": "Lists all stores."
					},
					"response": []
				},
				{
					"name": "Get store",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/v1/store/01234",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"store",
								"01234"
							]
						},
						"description": "Gets the store with the given id."
					},
					"response": []
				},
				{
					"name": "Get store history",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/v1/store/01234/history",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"store",
								"01234",
								"history"
							]
						},
						"description": "Gets the history of the store with the given id."
					},
					"response": []
				},
				{
					"name": "Upsert store",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"Id\": \"01234\",\r\n  \"ShortName\": \"ReTech\",\r\n  \"LongName\": \"Regensburg TechBase\",\r\n  \"Address\": {\r\n    \"Country\": \"Germany\",\r\n    \"Zip\": \"93053\",\r\n    \"City\": \"Regensburg\",\r\n    \"Street\": \"Franz-Mayer-Straße 1\",\r\n    \"Number\": \"1\"\r\n  },\r\n  \"VatId\": \"DE 123 456 789\",\r\n  \"ValidFrom\": \"2019-12-01T08:00:00.000Z\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/v1/store",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"store"
							]
						},
						"description": "Creates or updates the store. The valid from datetime will be set to the current timestamp if null or in the past."
					},
					"response": []
				},
				{
					"name": "Delete store",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{url}}/api/v1/store/1234?upUntilValidFrom=2020-12-31T23:59:59.999Z",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"store",
								"1234"
							],
							"query": [
								{
									"key": "upUntilValidFrom",
									"value": "2020-12-31T23:59:59.999Z",
									"description": "The datetime up until the store history should be deleted."
								}
							]
						},
						"description": "Deletes the store with the given id."
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Category",
			"item": [
				{
					"name": "Get categories",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/v1/category",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"category"
							]
						},
						"description": "Lists all categories."
					},
					"response": []
				},
				{
					"name": "Get category",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/api/v1/category/10fe80ed-c7d7-4687-90ef-5b9e37a486a5",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"category",
								"10fe80ed-c7d7-4687-90ef-5b9e37a486a5"
							]
						},
						"description": "Gets the category with the given id."
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Bill",
			"item": [
				{
					"name": "Add bill",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"UserId\": \"3fa85f64-5717-4562-b3fc-2c963f66afa6\",\r\n  \"StoreId\": \"01234\",\r\n  \"Bill\": {\r\n    \"TransactionId\": \"PID00057112:37\",\r\n    \"Date\": \"2019-10-11T12:37:13.485Z\",\r\n    \"BeginDateTime\": \"2019-10-11T12:36:58.175Z\",\r\n    \"EndDateTime\": \"2019-10-11T12:37:13.485Z\",\r\n    \"TotalAmountPaid\": \"112.90\",\r\n    \"TotalTaxPaid\": \"21.45\",\r\n    \"CustomText\": \"Vielen Dank für Ihr Vertrauen in uns!\",\r\n    \"LineItems\": [\r\n      {\r\n        \"Quantity\": 1,\r\n        \"PricePaid\": 12.95,\r\n        \"OriginalPrice\": 12.95,\r\n        \"Vat\": 19,\r\n        \"SequenceNumber\": 0,\r\n        \"PriceModifier\": 0,\r\n        \"Name\": \"Trittleiter\",\r\n        \"Ean\": \"5329858234\",\r\n        \"CategoryId\": \"459429CA-D625-4300-9C80-A553ADCB589F\"\r\n      },\r\n      {\r\n      \t\"QuantityType\": \"Count\",\r\n        \"Quantity\": 1,\r\n        \"PricePaid\": 79.95,\r\n        \"OriginalPrice\": 99.95,\r\n        \"Vat\": 19,\r\n        \"SequenceNumber\": 1,\r\n        \"PriceModifier\": 2,\r\n        \"Name\": \"Drehstuhl\",\r\n        \"Ean\": \"7209478435\",\r\n        \"CategoryId\": \"1E6683A7-8601-4C8D-9E81-AE6CFED913CF\"\r\n      }\r\n    ],\r\n    \"Categories\": [\r\n      \"459429CA-D625-4300-9C80-A553ADCB589F\",\r\n      \"1E6683A7-8601-4C8D-9E81-AE6CFED913CF\",\r\n      \"921A6FDB-35A5-400F-AB18-203C1DDEDB47\"\r\n    ],\r\n    \"Tenders\": [\r\n    \t{\r\n    \t\t\"TenderTypeId\": \"CASH\",\r\n    \t\t\"CurrencyCode\": \"EUR\",\r\n    \t\t\"Amount\": 112.90\r\n    \t}\r\n\t]\r\n  }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/api/v1/bill",
							"host": [
								"{{url}}"
							],
							"path": [
								"api",
								"v1",
								"bill"
							]
						},
						"description": "Adds a receipt for the given user to the System."
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "GetToken Vendor",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "22dde067-7c86-4e62-ac86-3ef8730e615c",
						"exec": [
							"var jsonData = JSON.parse(responseBody);\r",
							"pm.collectionVariables.set(\"access_token\", jsonData.access_token);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "grant_type",
							"value": "password",
							"type": "text"
						},
						{
							"key": "username",
							"value": "{{username}}",
							"type": "text"
						},
						{
							"key": "password",
							"value": "{{password}}",
							"type": "text"
						},
						{
							"key": "client_id",
							"value": "{{client_id}}",
							"type": "text"
						},
						{
							"key": "scope",
							"value": "https://ad.anybill.de/vendor/store https://ad.anybill.de/vendor/category https://ad.anybill.de/vendor/bill offline_access",
							"type": "text"
						},
						{
							"key": "response_type",
							"value": "token",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "https://adanybill.b2clogin.com/ad.anybill.de/oauth2/v2.0/token?p=b2c_1_ropc_vendor",
					"protocol": "https",
					"host": [
						"adanybill",
						"b2clogin",
						"com"
					],
					"path": [
						"ad.anybill.de",
						"oauth2",
						"v2.0",
						"token"
					],
					"query": [
						{
							"key": "p",
							"value": "b2c_1_ropc_vendor"
						}
					]
				},
				"description": "Gets an access token and sets it for all requests in the collection.\nFollowing scopes are available:\n- https://ad.anybill.de/vendor/store\n- https://ad.anybill.de/vendor/category\n- https://ad.anybill.de/vendor/bill"
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "188c5c82-f156-4bff-8b09-bf5a748ab91a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "4b6845ab-c11f-483d-abbb-d7025e750d27",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "690b6098-66e8-430f-865f-6094d1beb56c",
			"key": "username",
			"value": "",
			"type": "string"
		},
		{
			"id": "81ae6c0f-4f1a-45a3-a707-e6145518f1ca",
			"key": "password",
			"value": "",
			"type": "string"
		},
		{
			"id": "452b3388-7be2-4ff2-8dea-fe03f4f1f9e8",
			"key": "client_id",
			"value": "",
			"type": "string"
		},
		{
			"id": "527763dd-e69e-490c-b902-48f707da84df",
			"key": "access_token",
			"value": "",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}